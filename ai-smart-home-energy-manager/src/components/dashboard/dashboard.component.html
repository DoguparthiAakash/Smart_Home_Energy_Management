
<div class="space-y-8">
  <!-- Metric Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div class="bg-gray-800 rounded-xl shadow-lg p-6 flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300">
      <div class="bg-cyan-500/20 p-3 rounded-full">
        <svg class="h-8 w-8 text-cyan-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
        </svg>
      </div>
      <div>
        <p class="text-sm text-gray-400">Live Power</p>
        <p class="text-2xl font-bold">{{ totalPowerConsumption() }} W</p>
      </div>
    </div>
    <div class="bg-gray-800 rounded-xl shadow-lg p-6 flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300">
      <div class="bg-green-500/20 p-3 rounded-full">
        <svg class="h-8 w-8 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 11.21 12.77 10.5 12 10.5s-1.536.71-2.121 1.5c-.586.79-.586 1.804 0 2.594l.879.659z" />
        </svg>
      </div>
      <div>
        <p class="text-sm text-gray-400">Estimated Cost Today</p>
        <p class="text-2xl font-bold">â‚¹{{ todayCost().toFixed(2) }}</p>
      </div>
    </div>
    <div class="bg-gray-800 rounded-xl shadow-lg p-6 flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300">
      <div class="bg-purple-500/20 p-3 rounded-full">
        <svg class="h-8 w-8 text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
        </svg>
      </div>
      <div>
        <p class="text-sm text-gray-400">Active Devices</p>
        <p class="text-2xl font-bold">{{ activeDevicesCount() }} / {{ devices().length }}</p>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Devices List -->
    <div class="lg:col-span-1 bg-gray-800 rounded-xl shadow-lg p-6">
      <h2 class="text-xl font-semibold mb-4">Devices</h2>
      <div class="space-y-4 max-h-[600px] overflow-y-auto pr-2">
        @for (device of devices(); track device.id) {
          <app-device-card [device]="device" (toggle)="onToggleDevice(device.id)"></app-device-card>
        }
      </div>
    </div>

    <!-- Analytics & Recommendations -->
    <div class="lg:col-span-2 space-y-8">
       <div class="bg-gray-800 rounded-xl shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4">Live Energy Usage (kW)</h2>
          <app-energy-chart [data]="energyHistory()"></app-energy-chart>
       </div>
       <div class="bg-gray-800 rounded-xl shadow-lg p-6">
        <h2 class="text-xl font-semibold mb-2">AI-Powered Recommendation</h2>
        <div class="flex items-start space-x-4 text-yellow-300/90 bg-yellow-500/10 p-4 rounded-lg">
          <svg class="h-6 w-6 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.5 5.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0v-5a.5.5 0 01.5-.5zM9 12.75a1 1 0 112 0 1 1 0 01-2 0z" clip-rule="evenodd" />
          </svg>
          <p>{{ recommendation() }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
